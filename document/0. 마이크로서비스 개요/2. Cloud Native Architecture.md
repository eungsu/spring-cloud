# Cloud Native Architecture

- 2010년대 이후 부터 IT 시스템은 Anti-Fragile 또는 Cloud Native Architecture 형태로 발달되어 왔음
- 기존의 로컬 환경이나 사내에서 구축하고 운영하였던 시스템을 클라우드 환경으로 전환하기 위해서 필요한 아키텍처는 아래와 같다.

## 확장 가능한 아키텍처

- 시스템의 수평적 확장에 유연
  - 시스템의 수평적 확장으로 인해 더 많은 사용자의 요청을 처리할 수 있게 되었음
- 확장된 서버로 시스템의 부하 분산, 가용성 보장
  - 시스템 확장은 Scale-up과 Scale-out으로 나눌 수 있다.
  - Scale-up은 하드웨어의 사양을 높이는 작업이다. 시스템의 CPU나 메모리의 스펙을 높이는 작업들을 말한다.
  - Scale-out은 같은 사양의 서버 즉, 인스턴스를 여러 대 배치함으로써 동시에 더 많은 사용자의 요청을 처리할 수 있도록 하는 것이다.
  - 시스템을 양적으로 늘리는 것은 시스템의 하드웨어 비용이 증가하게 되겠지만, cloud native architecture에서는 클라우드 서비스를 제공하는 업체로부터 가상의 서버, 가상의 스토리지, 가상의 네트워크 등을 빌려서 사용하게 됨으로서 비용을 최소하 시킬 수 있고, 양적으로 증가된 시스템을 더 이상 사용하지 않게 되었을 경우에는 대여했던 자원을 반납해서 비용을 낮출 수 있다.
- 시스템 또는 서비스 애플리케이션 단위의 패키지(컨테이너 기반 패키지)
  - 클라우드 네이티브에서는 가상서버 기술이 핵심적인 기술이 되었다.
  - 기존의 서버 가상화 방식과 더불어 컨테이너 방식의 가상화를 같이 사용한다.
- 모니터링
  - 클라우드 네이티브에 구축된 가상 서버와 리소스들은 다양한 모니터링 도구를 이용해서 현재 사용되고 있는 시스템의 상황 및 리소스의 사용량 등을 모니터링 할 수 있다.

## 탄력적 아키텍처

- 서비스 생성/통합/배포, 비즈니스 환경 변환에 대응 시간 단축
  - 애플리케이션을 구성하는 각 기능을 하나의 분리된 마이크로서비스로 개발을 하고, 분리된 서비스를 통합하고 배포하기까지 소요되는 시간을 CI/CD라는 자동화 파이프 라인을 통해서 처리함으로써 시스템 환경에 적용되는 시간을 단축할 수 있게 되었다.
  - 엔터프라이즈 환경으로 갈수록 수 많은 개발 인력의 증가 뿐만 아니라, 수 많은 개발환경, 테스트환경, 운영환경을 고려해서 준비해야 하기 때문에 이러한 환경은 적게는 수십개 많게는 수백개의 환경일 수 있다.
  - 이렇게 다양한 환경에 서비스 내용을 배포하는 과정이 자동화되어 있지 않다면, 개발자는 비즈니스 로직을 개발하는 시간보다 빌드하고 배포하는 상당한 시간을 허비하게 될 수 있다.
- 분할된 서비스 구조
  - 마이크로서비스는 작게 분리된 독립적인 서비스다.
  - 전체 애플리케이션을 구성하고 있는 도메인의 특성에 따라 서비스의 경계를 잘 구분하고, 서비스를 개발해야 한다.
- 무상태 통신 프로토콜
  - 서로 분리된 서비스들 간의 원할한 통신을 위해 각각의 서비스들은 종속성을 최소화시켜야 되고, 상태를 갖지 않는 서비스를 제공하려고 노력해야 한다.
- 서비스의 추가/삭제 자동으로 감지
  - 전체 서비스를 구성하는 마이크로서비스는 자신들이 배포될 때, 자신의 위치가 어디에 있는지 등록을 해야함으로써 다른 서비스들이나 외부의 타 시스템에서도 해당 서비스를 검색하고 사용할 수 있게 된다.
  - 마이크로서비스들의 존재는 Discovery Service라는 곳에 등록되거나 삭제된다.
- 변경된 서비스 요청에 따라 사용자 요청 처리(동적 처리)

## 장애격리(Fault isolation)

- 특정 서비스에 오류가 발생해도 다른 서비스에 영향을 주지 않음
  - 클라우드 네이티브 아키텍처는 장애복구에 뛰어나다는 특징을 가지고 있다.
  - 여러 개로 분리되어 개발되는 마이크로서비스들은 하나의 독립적인 작은 단위의 애플리케이션과 동일하기 때문에 하나의 마이크로서비스에서 생기는 문제나 오류사항은 다른 쪽 서비스로의 영향을 최소화할 수 있게 된다.
  - 마이크로서비스의 특정 부분을 수정한다고 하더라도 전체 서비스를 다시 배포하는 대신 해당 마이크로서비스만 배포할 수 있기 때문에 다른 서비스에 영향을 주지 않을 수 있게 된다.
